#!/bin/sh

echo "\n > Upgrading brew packages...\n"
brew update
brew upgrade
# Fixes gnupg link conflicts with GPGSuite
brew unlink gnupg

echo "\n > Upgrading pecl packages...\n"
# Paths to openssl to build pecl extensions (swoole)
export PATH="${HOMEBREW_PREFIX}/opt/openssl@3/bin:$PATH"
export LDFLAGS="-L${HOMEBREW_PREFIX}/opt/openssl@3/lib"
export CPPFLAGS="-I${HOMEBREW_PREFIX}/opt/openssl@3/include"
export PKG_CONFIG_PATH="${HOMEBREW_PREFIX}/opt/openssl@3/lib/pkgconfig"

pecl upgrade

echo "\n > Upgrading global composer packages...\n"
composer global upgrade

echo "\n > Running valet install...\n"
valet install

echo "\n > Upgrading nvim packages...\n"
nvim +PlugUpgrade +PlugUpdate +qall

echo "\n > Upgrading znap plugins...\n"
znap-update
echo "\n"

echo "\n > Done ğŸš€ enjoy your day!\n"
